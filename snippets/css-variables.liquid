{% doc %}
  Renders CSS custom properties (variables) for the theme based on global settings.
  This snippet should be included in the <head> of the theme layout.

  @example
  {% render 'css-variables' %}
{% enddoc %}

{% style %}
  {%- comment -%} Load font faces with display: swap for better performance {%- endcomment -%}
  {{ settings.font_body | font_face: font_display: 'swap' }}
  {{ settings.font_body | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.font_body | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}
  {{ settings.font_heading | font_face: font_display: 'swap' }}
  {{ settings.font_heading | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}

  {%- comment -%} Custom font: STIX Two Text {%- endcomment -%}
  @font-face {
    font-family: 'STIX Two Text';
    src: url('https://cdn.shopify.com/s/files/1/0726/7788/3951/files/STIXTwoText-VariableFont_wght.woff2?v=1764568174') format('woff2');
    font-weight: 100 900;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'STIX Two Text';
    src: url('https://cdn.shopify.com/s/files/1/0726/7788/3951/files/STIXTwoText-Italic-VariableFont_wght.woff2?v=1764568174') format('woff2');
    font-weight: 100 900;
    font-style: italic;
    font-display: swap;
  }

  :root {
    /* ========================================
       Typography
       ======================================== */
    {%- if settings.custom_font_enabled -%}
    --font-body-family: 'STIX Two Text', Georgia, serif;
    --font-body-style: normal;
    --font-body-weight: 400;
    --font-heading-family: 'STIX Two Text', Georgia, serif;
    --font-heading-style: normal;
    --font-heading-weight: 600;
    {%- else -%}
    --font-body-family: {{ settings.font_body.family }}, {{ settings.font_body.fallback_families }};
    --font-body-style: {{ settings.font_body.style }};
    --font-body-weight: {{ settings.font_body.weight }};
    --font-heading-family: {{ settings.font_heading.family }}, {{ settings.font_heading.fallback_families }};
    --font-heading-style: {{ settings.font_heading.style }};
    --font-heading-weight: {{ settings.font_heading.weight }};
    {%- endif -%}
    --font-body-scale: {{ settings.body_size_scale | divided_by: 100.0 }};

    /* Desktop/Mobile heading scales */
    --font-heading-scale-desktop: {{ settings.heading_size_scale | divided_by: 100.0 }};
    --font-heading-scale-mobile: {{ settings.heading_size_scale_mobile | divided_by: 100.0 }};
    --font-heading-scale: var(--font-heading-scale-mobile);

    /* Base font sizes (scaled by --font-*-scale) */
    --font-size-xs: calc(0.75rem * var(--font-body-scale));
    --font-size-sm: calc(0.875rem * var(--font-body-scale));
    --font-size-base: calc(1rem * var(--font-body-scale));
    --font-size-lg: calc(1.125rem * var(--font-body-scale));
    --font-size-xl: calc(1.25rem * var(--font-body-scale));

    /* Heading sizes (scaled by --font-heading-scale) */
    --font-size-h1: calc(2.5rem * var(--font-heading-scale));
    --font-size-h2: calc(2rem * var(--font-heading-scale));
    --font-size-h3: calc(1.5rem * var(--font-heading-scale));
    --font-size-h4: calc(1.25rem * var(--font-heading-scale));
    --font-size-h5: calc(1.125rem * var(--font-heading-scale));
    --font-size-h6: calc(1rem * var(--font-heading-scale));

    /* ========================================
       Colors
       ======================================== */
    --color-background: {{ settings.color_background }};
    --color-text: {{ settings.color_text }};
    --color-text-muted: {{ settings.color_text_muted }};

    --color-primary: {{ settings.color_primary }};
    --color-primary-text: {{ settings.color_primary_text }};
    --color-secondary: {{ settings.color_secondary }};
    --color-secondary-text: {{ settings.color_secondary_text }};

    --color-border: {{ settings.color_border }};
    --color-error: {{ settings.color_error }};
    --color-success: {{ settings.color_success }};

    /* Legacy aliases for backwards compatibility */
    --color-foreground: var(--color-text);
    --color-foreground-muted: var(--color-text-muted);
    --color-primary-contrast: var(--color-primary-text);

    /* ========================================
       Layout - Mobile First (defaults)
       ======================================== */
    --page-width: {{ settings.page_width }}px;

    /* Desktop values (for reference in sections) */
    --page-margin-desktop: {{ settings.page_margin }}px;
    --section-spacing-desktop: {{ settings.section_spacing }}px;
    --logo-width-desktop: {{ settings.logo_width }}px;

    /* Mobile values (for reference in sections) */
    --page-margin-mobile: {{ settings.page_margin_mobile }}px;
    --section-spacing-mobile: {{ settings.section_spacing_mobile }}px;
    --logo-width-mobile: {{ settings.logo_width_mobile }}px;

    /* Active values (mobile first) */
    --page-margin: var(--page-margin-mobile);
    --section-spacing: var(--section-spacing-mobile);
    --logo-width: var(--logo-width-mobile);

    /* ========================================
       UI Elements
       ======================================== */
    --button-border-radius: {{ settings.button_border_radius }}px;
    --input-border-radius: {{ settings.input_border_radius }}px;

    /* ========================================
       Spacing Scale
       ======================================== */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    --space-3xl: 4rem;
    --space-4xl: 6rem;

    /* ========================================
       Transitions
       ======================================== */
    --transition-fast: 150ms ease;
    --transition-base: 250ms ease;
    --transition-slow: 400ms ease;

    /* ========================================
       Shadows
       ======================================== */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }

  /* ========================================
     Desktop breakpoint overrides
     ======================================== */
  @media (min-width: 768px) {
    :root {
      --font-heading-scale: var(--font-heading-scale-desktop);
      --page-margin: var(--page-margin-desktop);
      --section-spacing: var(--section-spacing-desktop);
      --logo-width: var(--logo-width-desktop);
    }
  }
{% endstyle %}
